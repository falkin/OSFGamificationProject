define(['../../../node_modules/endtable/lib','../../../engine'], function (endtable,engine) {
	
    // We define a Person with a custom view
	var Level = endtable.Object.extend(
	{
		sayName: function() {
			sys.puts('Hello, my name is ' + this.name + '!');
		},
		sayAge: function() {
			sys.puts(this.name + ': age=' + this.age);
		}
		},
		{
			engine: engine,
			type: 'level',
			customViews: [
				function lowerName(doc) {
				if(doc.type == 'person') { emit(doc.name.toLowerCase(), doc); }
				},
				function ageInDays(doc) {
				if(doc.type == 'person') { emit(doc.age*365.25, doc); }
				}
			]
		}
	);
	
    return Level;

});
